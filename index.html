<!--
 * @Author: your name
 * @Date: 2020-12-23 20:29:27
 * @LastEditTime: 2020-12-24 19:52:09
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /blog/index.html
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const candy = rating => {
        const n = rating.length;
        let inc = 0,
          dec = 0,
          pre = 1,
          ret = 1;

        for (let i = 1; i < n; i++) {
          if (rating[i] >= rating[i - 1]) {
            dec = 0;
            if (rating[i] === rating[i - 1]) pre = 1;
            else pre++;
            ret += pre;
            inc = pre;
          } else {
            dec++;
            if (dec === inc) dec++;
            ret += dec;
            pre = 1;
          }
        }
        return ret;
      };
      console.log(candy([1, 2, 5, 4, 3, 2, 1]));
    </script>
  </body>
</html>
